/**
 * @file Glitch Effects
 * @description Hero name glitch positioning, section title glitch flicker,
 *              global environment glitch, and click glitch overlay.
 */

/* Hero name glitch containment */
.hero-name {
  position: relative;
  contain: layout style;
}

/* Section title glitch flicker */
.section-title {
  animation: sectionGlitch 8s infinite;
}

@keyframes sectionGlitch {
  0%, 1.9%, 2.1%, 51.9%, 52.1%, 100% {
    transform: none;
    opacity: 1;
  }
  2% {
    transform: translate(-2px, 1px) skewX(-0.5deg);
    opacity: 0.85;
  }
  52% {
    transform: translate(1px, -1px) skewX(0.5deg);
    opacity: 0.9;
  }
}

/* Global environment glitch (body) */
body.env-glitch {
  animation: envGlitchBody 200ms steps(4) forwards;
}

@keyframes envGlitchBody {
  0%   { filter: hue-rotate(0deg); }
  25%  { filter: hue-rotate(40deg) saturate(1.8); }
  50%  { filter: hue-rotate(-30deg) brightness(1.1); }
  75%  { filter: hue-rotate(20deg) saturate(1.4); }
  100% { filter: none; }
}

/* Click glitch overlay */
.click-glitch-overlay {
  position: fixed;
  inset: 0;
  z-index: 9995;
  pointer-events: none;
  opacity: 0;

  &.active {
    animation: clickGlitch 150ms steps(3) forwards;
  }
}

@keyframes clickGlitch {
  0% {
    opacity: 1;
    background: transparent;
    clip-path: inset(10% 0 60% 0);
    filter: hue-rotate(90deg);
    transform: translate(-2px, 1px);
  }
  33% {
    clip-path: inset(50% 0 10% 0);
    filter: hue-rotate(-90deg);
    transform: translate(2px, -1px);
    background: rgba(var(--accent-glow), 0.03);
  }
  66% {
    clip-path: inset(30% 0 30% 0);
    filter: hue-rotate(45deg);
    transform: translate(-1px, 2px);
    background: rgba(255, 0, 100, 0.02);
  }
  100% {
    opacity: 0;
    transform: none;
    filter: none;
  }
}
