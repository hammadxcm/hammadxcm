---
/**
 * Professional Journey Section
 * Vertical timeline with animated progress bar, colored dots,
 * and glassmorphism career cards.
 *
 * @depends config.experience
 * @styles Scoped SCSS — timeline layout, cards, dots + responsive
 */
import SectionHeader from './SectionHeader.astro';
import { config } from '@config/index';
---

<!-- ══════ PROFESSIONAL JOURNEY ══════ -->
<section id="journey" class="section">
  <SectionHeader label="// Where I've been" title="Professional Journey" />
  <div class="timeline">
    {config.experience.map((entry, i) => (
      <div class={`timeline-item ${i % 2 === 0 ? 'reveal-left' : 'reveal-right'}`}>
        <div class="timeline-dot"></div>
        <div class="timeline-card glass">
          <div class="timeline-date" set:html={entry.date} />
          <h3 class="timeline-role">{entry.role} @ <a href={entry.companyUrl} target="_blank" rel="noopener" class="timeline-company">{entry.company}</a></h3>
          <p class="timeline-meta" set:html={entry.meta} />
          <ul class="timeline-achievements">
            {entry.achievements.map((achievement) => (
              <li set:html={achievement} />
            ))}
          </ul>
          <div class="timeline-tech">
            {entry.tags.map((tag) => (
              <span>{tag}</span>
            ))}
          </div>
        </div>
      </div>
    ))}
  </div>
</section>

<style lang="scss">
  @use '../styles/mixins' as *;

  .timeline {
    position: relative;
    max-width: 900px;
    margin: 0 auto;
    --timeline-progress: 0;

    &::before {
      content: '';
      position: absolute;
      left: 28px;
      top: 0;
      width: 2px;
      height: calc(var(--timeline-progress) * 100%);
      background: linear-gradient(to bottom, var(--accent), var(--accent-blue), var(--accent-tertiary), var(--accent-mint));
      box-shadow: 0 0 12px rgba(var(--accent-glow), 0.3);
      transition: height 0.05s linear;

      @include respond-to(mobile) { left: 16px; }
    }
  }

  .timeline-item {
    position: relative;
    padding-left: 72px;
    margin-bottom: 3rem;

    @include respond-to(mobile) { padding-left: 48px; margin-bottom: 2rem; }
    @include respond-to(small) { padding-left: 42px; }
  }

  .timeline-dot {
    position: absolute;
    left: 20px;
    top: 8px;
    width: 18px; height: 18px;
    border-radius: var(--radius-full);
    border: 3px solid var(--accent);
    background: var(--bg);
    z-index: 2;
    box-shadow: 0 0 12px rgba(var(--accent-glow), 0.4);
    animation: dotPulse 3s ease-in-out infinite;

    @include respond-to(mobile) { left: 8px; width: 16px; height: 16px; }
  }

  .timeline-item:nth-child(2) .timeline-dot { border-color: var(--accent-blue); box-shadow: 0 0 12px rgba(var(--accent-blue-glow), 0.4); }
  .timeline-item:nth-child(3) .timeline-dot { border-color: var(--accent-mint); box-shadow: 0 0 12px rgba(var(--accent-glow), 0.4); }
  .timeline-item:nth-child(4) .timeline-dot { border-color: var(--accent-tertiary); box-shadow: 0 0 12px rgba(var(--accent-glow), 0.4); }
  .timeline-item:nth-child(5) .timeline-dot { border-color: var(--accent-blue); box-shadow: 0 0 12px rgba(var(--accent-blue-glow), 0.4); }
  .timeline-item:nth-child(6) .timeline-dot { border-color: var(--accent-mint); box-shadow: 0 0 12px rgba(var(--accent-glow), 0.4); }

  @keyframes dotPulse {
    0%, 100% { box-shadow: 0 0 8px rgba(var(--accent-glow), 0.3); }
    50% { box-shadow: 0 0 20px rgba(var(--accent-glow), 0.6); }
  }

  .timeline-card {
    padding: 1.75rem;
    transition: all var(--duration-slow) var(--ease-out-expo);

    &:hover {
      border-color: var(--border-glow);
      transform: translateX(4px);
    }

    @include respond-to(mobile) { padding: 1.25rem; }
    @include respond-to(small) { padding: 1rem; }
  }

  .timeline-date {
    font-family: var(--font-mono);
    font-size: 0.8rem;
    color: var(--accent);
    margin-bottom: 0.5rem;
  }

  .timeline-role {
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 0.25rem;

    @include respond-to(mobile) { font-size: 1.05rem; }
    @include respond-to(small) { font-size: 0.95rem; }
  }

  .timeline-company {
    color: var(--accent-blue);
    font-weight: 600;
    text-decoration: none;
    transition: color var(--duration-normal);
  }

  a.timeline-company:hover {
    color: var(--accent-mint);
    text-decoration: underline;
    text-underline-offset: 3px;
  }

  .timeline-meta {
    font-size: 0.85rem;
    color: var(--text-dim);
    margin-bottom: 1rem;
  }

  .timeline-achievements {
    list-style: none;

    li {
      position: relative;
      padding-left: 1.25rem;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
      color: var(--text-dim);
      line-height: 1.5;

      &::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0.55em;
        width: 6px; height: 6px;
        border-radius: var(--radius-full);
        background: var(--accent);
      }

      @include respond-to(mobile) { font-size: 0.85rem; }
    }
  }

  .timeline-tech {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
    margin-top: 1rem;

    span {
      font-family: var(--font-mono);
      font-size: 0.7rem;
      padding: 0.2rem 0.6rem;
      border-radius: var(--radius-sm);
      background: rgba(var(--accent-glow), 0.08);
      color: var(--accent);
      border: 1px solid rgba(var(--accent-glow), 0.15);
    }

    @include respond-to(mobile) {
      gap: 0.3rem;
      span { font-size: 0.65rem; padding: 0.15rem 0.5rem; }
    }
  }
</style>
